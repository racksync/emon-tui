# Home Assistant Configuration
# Copy this file to config.toml and fill in your details

[home_assistant]
url = "http://homeassistant.local:8123"
token = "your_long_lived_access_token_here"

# System Configuration
max_solar_power = 18000.0              # Maximum solar power in Watts (used for gauge scaling and history chart Y-axis)
battery_float_voltage = 54.0              # Battery floating voltage threshold (e.g., 54V for 48V battery system)
battery_capacity_kwh = 15.36            # Total battery capacity in kWh (e.g., 15.36 kWh for a 48V 320Ah system)
history_duration = "120s"               # History duration with unit: s/m/h (e.g., "180s", "3m", "1h", default: "120s")
timezone = "Asia/Bangkok"               # Timezone for display (default: Asia/Bangkok)
max_daily_energy = 100.0               # Maximum expected daily energy in kWh for bar chart scaling (default: 100.0)
fetch_interval_seconds = 5               # Data fetch interval in seconds (0 = realtime ~100ms, default: 5)

[home_assistant.entities]

# ========================================
# CORE POWER SENSORS (Required)
# ========================================
solar_production = "sensor.solar_production"
grid_import = "sensor.grid_import"
grid_export = "sensor.grid_export"
load_consumption = "sensor.load_consumption"

# ========================================
# LOAD SENSORS
# ========================================
load_current = "sensor.emon_load_energy_current"
load_power_factor = "sensor.emon_load_energy_factor"
essential_power = "sensor.emon_load_energy_power"

# ========================================
# BATTERY SENSORS
# ========================================
battery_power = "sensor.battery_power"
battery_voltage = "sensor.battery_voltage"
battery_soc = "sensor.battery_soc"
battery_temp = "sensor.battery_temp"
battery_current = "sensor.battery_current"

# ========================================
# INVERTER SENSORS
# ========================================
inverter_temp = "sensor.inverter_temp"
inverter_voltage = "sensor.inverter_voltage"
inverter_status = "sensor.inverter_status"
inverter_frequency = "sensor.inverter_frequency"
dc_transformer_temp = "sensor.dc_transformer_temp"
radiator_temp = "sensor.radiator_temp"

# ========================================
# GRID SENSORS
# ========================================
grid_voltage = "sensor.grid_voltage"
grid_ct_power = "sensor.grid_ct_power"
grid_power_factor = "sensor.emon_grid_energy_factor"

# ========================================
# DAILY ENERGY SENSORS
# ========================================
day_battery_charge = "sensor.day_battery_charge"
day_battery_discharge = "sensor.day_battery_discharge"
day_grid_import = "sensor.day_grid_import"
day_grid_export = "sensor.day_grid_export"
day_load_energy = "sensor.emon_load_energy_today"
day_pv_energy = "sensor.day_pv_energy"

# ========================================
# TOTAL ENERGY SENSORS
# ========================================
total_pv_generation = "sensor.total_pv_generation"
remaining_solar = "sensor.remaining_solar"

# ========================================
# STATISTICS SENSORS
# ========================================

# All-time peaks
all_time_energy_usage_peak = "sensor.all_time_energy_usage_peak"
all_time_energy_usage_peak_date = "sensor.all_time_energy_usage_peak_date"
all_time_load_peak = "sensor.all_time_load_peak"
all_time_pv_power_peak = "sensor.all_time_pv_power_peak"
all_time_pv_power_peak_date = "sensor.all_time_pv_power_peak_date"
all_time_pv_yield_peak = "sensor.all_time_pv_yield_peak"
all_time_pv_yield_peak_date = "sensor.all_time_pv_yield_peak_date"

# Daily peaks
daily_pv_power_peak = "sensor.daily_pv_power_peak"
daily_pv_power_peak_date = "sensor.daily_pv_power_peak_date"

# Consumption stats
night_consume = "sensor.night_consume"
day_consume = "sensor.emon_glob_day_consume"
load_energy_yesterday = "sensor.emon_load_energy_yesterday"
load_energy_total = "sensor.emon_load_energy_total"

# PV forecast
pv_forecast_remain = "sensor.pv_forecast_remain"
pv_forecast_today = "sensor.pv_forecast_today"
